@startuml C4_Container
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(user_person, "User", "Reddit user")
System_Boundary(c1, "Reddit system") {
    Container(gateway, "Gateway", "FastAPI", "Entry point for the system. Handles authentication and routing.")
    Container(user, "User", "FastAPI", "Microservice for users.")
    Container(comment, "Comment", "FastAPI", "Microservice for comments.")
    Container(post, "Post", "FastAPI", "Microservice for posts.")
    Container(vote, "Vote", "FastAPI", "Microservice for votes.")
    Container(subreddit, "Subreddit", "FastAPI", "Microservice for subreddits.")
    ContainerDb(postgres_db, "Database", "PostgreSQL", "Holds all information.")
}

Rel(user_person, gateway, "Uses", "HTTPS")
Rel(gateway, user, "Routes to", "HTTPS")
Rel(gateway, comment, "Routes to", "HTTPS")
Rel(gateway, post, "Routes to", "HTTPS")
Rel(gateway, vote, "Routes to", "HTTPS")
Rel(gateway, subreddit, "Routes to", "HTTPS")
Rel(user, postgres_db, "Reads/Writes", "SQLAlchemy")
Rel(comment, postgres_db, "Reads/Writes", "SQLAlchemy")
Rel(post, postgres_db, "Reads/Writes", "SQLAlchemy")
Rel(vote, postgres_db, "Reads/Writes", "SQLAlchemy")
Rel(subreddit, postgres_db, "Reads/Writes", "SQLAlchemy")
@enduml
